library(foreign)
Panel <-read.dta("http://dss.princeton.edu/training/Panel101.dta")
View(Panel)
panel <-read.dta("http://dss.princeton.edu/training/Panel101.dta")
colnames(panel)
sample(nrow(panel))
sample(6,nrow(panel))
sample(nrow(panel),nrow(panel)*.25)
sample(nrow(panel),nrow(panel)*.2)
panel$y[sample(nrow(panel),nrow(panel)*.2)]
panel$y[sample(nrow(panel),nrow(panel)*.2)]<-NA
View(panel)
library(tempura)
library(tempura)
devtools::load_all(".")
library(tempura)
library(tempura)
devtools::load_all(".")
devtools::load_all(".")
x<-read_dta("C:/Users/Machtei/OneDrive - University of North Carolina at Chapel Hill/Data/CWS/June22_workingupdate.dta")
x<-haven::read_dta("C:/Users/Machtei/OneDrive - University of North Carolina at Chapel Hill/Data/CWS/June22_workingupdate.dta")
dvpaul<-function(formula, dataset,idvar,timevar){
XVEC<-labels(terms(formula))
idvar <- deparse(substitute(idvar))
timevar <- deparse(substitute(timevar))
yvar <- all.vars(formula)[1]
dataz<-dataset %>% dplyr::select(all_of(c(idvar,timevar,yvar,XVEC)))
colnames(dataz)<-c("idv","timev",yvar,XVEC)
dataz<-na.omit(dataz)
polyd<-polydata(dataz,idv,timev)
fnew<-update(formula, . ~ . +t+t_cubed+t_squared)
poly_model<-lm(fnew,polyd)
return(poly_model)
}
dvpaul(csredist_feb22~ud21+leftcum+skew, x,idn,year)
dvpaul<-function(formula, dataset,idvar,timevar){
`%>%` <- magrittr::`%>%`
XVEC<-labels(terms(formula))
idvar <- deparse(substitute(idvar))
timevar <- deparse(substitute(timevar))
yvar <- all.vars(formula)[1]
dataz<-dataset %>% dplyr::select(all_of(c(idvar,timevar,yvar,XVEC)))
colnames(dataz)<-c("idv","timev",yvar,XVEC)
dataz<-na.omit(dataz)
polyd<-polydata(dataz,idv,timev)
fnew<-update(formula, . ~ . +t+t_cubed+t_squared)
poly_model<-lm(fnew,polyd)
return(poly_model)
}
dvpaul(csredist_feb22~ud21+leftcum+skew, x,idn,year)
polydata<-function(datasett,idvv,timevv){
`%>%` <- magrittr::`%>%`
idvv <- deparse(substitute(idvv))
timevv <- deparse(substitute(timevv))
datasett$idt<-datasett[[idvv]]
datasett$timet<-datasett[[timevv]]
datasett<-datasett[order(datasett$idt,datasett$timet),]
datasett<-datasett%>% dplyr::group_by(idt) %>% dplyr::mutate(t0=min(timet)) %>% dplyr::ungroup()
datasett$t<-datasett$timet-datasett$t0
datasett$t_squared<-datasett$t^2
datasett$t_cubed<-datasett$t^3
datasett$t0<-NULL
datasett$idt<-NULL
datasett$timet<-NULL
return(datasett)
}
dvpaul(csredist_feb22~ud21+leftcum+skew, x,idn,year)
devtools::load_all(".")
library(devtools)
detach("package:devtools", unload = TRUE)
remove.packages("devtools")
install.packages("devtools")
library(devtools)
R.version
remove.packages("devtools")
install.packages("devtools", type="binary")
libPaths()
